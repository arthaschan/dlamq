ALTER TABLE CDM.T_CDM_DL_MSG
 DROP PRIMARY KEY CASCADE;

DROP TABLE CDM.T_CDM_DL_MSG CASCADE CONSTRAINTS;

CREATE TABLE CDM.T_CDM_DL_MSG
(
  FID          VARCHAR2(36 BYTE)                NOT NULL,
  FVERSION     NUMBER(10),
  FTYPE        VARCHAR2(30 BYTE),
  FSUBTYPE     VARCHAR2(30 BYTE),
  FXMLCONTENT  CLOB,
  FSTATE       VARCHAR2(10 BYTE),
  FEXCEPTION   VARCHAR2(4000 BYTE),
  FSENDTIME    DATE,
  FRECEIVER    VARCHAR2(32 BYTE),
  FSENDER      VARCHAR2(32 BYTE),
  FSEQN        VARCHAR2(30 BYTE),
  FCREATETIME  DATE,
  FSEATSTATE   VARCHAR2(1 BYTE)
)
LOB (FXMLCONTENT) STORE AS (
  TABLESPACE TBS_CDM_MSG
  ENABLE       STORAGE IN ROW
  CHUNK       8192
  RETENTION
  NOCACHE
  LOGGING
  INDEX       (
        TABLESPACE TBS_CDM_MSG
        STORAGE    (
                    INITIAL          64K
                    NEXT             1M
                    MINEXTENTS       1
                    MAXEXTENTS       UNLIMITED
                    PCTINCREASE      0
                    BUFFER_POOL      DEFAULT
                   ))
      STORAGE    (
                  INITIAL          64K
                  NEXT             1M
                  MINEXTENTS       1
                  MAXEXTENTS       UNLIMITED
                  PCTINCREASE      0
                  BUFFER_POOL      DEFAULT
                 ))
TABLESPACE TBS_CDM_MSG
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE CDM.T_CDM_DL_MSG IS '大连航班消息表';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FVERSION IS '版本';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FTYPE IS '消息类型';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSUBTYPE IS '消息子类型';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FXMLCONTENT IS '报文内容';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSTATE IS '状态 0:正确 非0为错误';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FEXCEPTION IS '处理异常';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSENDTIME IS '发送时间';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FRECEIVER IS '接收者';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSENDER IS '发送者';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSEQN IS '序号';

COMMENT ON COLUMN CDM.T_CDM_DL_MSG.FSEATSTATE IS '停机位处理状态：默认为空，已处理为1,未处理为0';


CREATE UNIQUE INDEX CDM.PK_T_CDM_DL_MSG ON CDM.T_CDM_DL_MSG
(FID)
LOGGING
TABLESPACE TBS_CDM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
PARALLEL ( DEGREE 2 INSTANCES 1 );


CREATE INDEX CDM.T_CDM_DL_MSG_IDX ON CDM.T_CDM_DL_MSG
(FSENDTIME)
LOGGING
TABLESPACE TBS_CDM_MSG
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
PARALLEL ( DEGREE 2 INSTANCES 1 );


ALTER TABLE CDM.T_CDM_DL_MSG ADD (
  CONSTRAINT PK_T_CDM_DL_MSG
  PRIMARY KEY
  (FID)
  USING INDEX CDM.PK_T_CDM_DL_MSG);



CREATE UNIQUE INDEX CDM.PK_T_CDM_DL_MSG ON CDM.T_CDM_DL_MSG
(FID)
LOGGING
TABLESPACE TBS_CDM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
PARALLEL ( DEGREE 2 INSTANCES 1 );


CREATE INDEX CDM.T_CDM_DL_MSG_IDX ON CDM.T_CDM_DL_MSG
(FSENDTIME)
LOGGING
TABLESPACE TBS_CDM_MSG
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
PARALLEL ( DEGREE 2 INSTANCES 1 );


ALTER TABLE CDM.T_CDM_DL_MSG ADD (
  CONSTRAINT PK_T_CDM_DL_MSG
  PRIMARY KEY
  (FID)
  USING INDEX CDM.PK_T_CDM_DL_MSG);



-- 创建历史表
CREATE TABLE CDM.T_CDM_DL_MSG_HIS
(
  FID          VARCHAR2(36 BYTE)                NOT NULL,
  FVERSION     NUMBER(10),
  FTYPE        VARCHAR2(30 BYTE),
  FSUBTYPE     VARCHAR2(30 BYTE),
  FXMLCONTENT  CLOB,
  FSTATE       VARCHAR2(10 BYTE),
  FEXCEPTION   VARCHAR2(4000 BYTE),
  FSENDTIME    DATE,
  FRECEIVER    VARCHAR2(32 BYTE),
  FSENDER      VARCHAR2(32 BYTE),
  FSEQN        VARCHAR2(30 BYTE),
  FCREATETIME  DATE
)